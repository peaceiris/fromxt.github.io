<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>How to enable DNS-over-HTTPS (DoH) - Canary - Home page</title><meta name=renderer content=webkit><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content=no-transform><meta http-equiv=cache-control content=no-siteapp><meta name=theme-color content=#f8f5ec><meta name=msapplication-navbutton-color content=#f8f5ec><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=#f8f5ec><meta name=author content=Canary><meta name=description content><meta name=keywords content=Hugo,Canary,even><meta name=generator content="Hugo 0.58.3 with theme even"><link rel=canonical href=https://fromxt.github.io/post/how_to_enable_doh/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><link href=/dist/even.c2a46f00.min.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property=og:title content="How to enable DNS-over-HTTPS (DoH)"><meta property=og:description content><meta property=og:type content=article><meta property=og:url content=https://fromxt.github.io/post/how_to_enable_doh/><meta property=article:published_time content=2019-09-09T07:35:15+08:00><meta property=article:modified_time content=2019-12-17T10:59:17+08:00><meta itemprop=name content="How to enable DNS-over-HTTPS (DoH)"><meta itemprop=description content><meta itemprop=datePublished content=2019-09-09T07:35:15&#43;08:00><meta itemprop=dateModified content=2019-12-17T10:59:17&#43;08:00><meta itemprop=wordCount content=475><meta itemprop=keywords content=Chrome,FireFox,DoH,><meta name=twitter:card content=summary><meta name=twitter:title content="How to enable DNS-over-HTTPS (DoH)"><meta name=twitter:description content><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Canary</a></div><div class=mobile-navbar-icon><span></span><span></span><span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Canary</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>How to enable DNS-over-HTTPS (DoH)</h1><div class=post-meta><span class=post-time>September 9, 2019</span><div class=post-category><a href=/categories/computer/>computer</a></div><span class=more-meta>475 words</span>
<span class=more-meta>3 mins read</span>
<span id=busuanzi_container_page_pv class=more-meta><span id=busuanzi_value_page_pv><img src=/img/spinner.svg alt=spinner.svg></span> times read</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><ul><li><a href=#what-is-doh>What is DoH</a></li><li><a href=#enabling-and-disabling-dns-over-https-in-chrome>Enabling and disabling DNS-over-HTTPS in Chrome</a></li><li><a href=#enabling-and-disabling-dns-over-https-in-firefox>Enabling and disabling DNS-over-HTTPS in Firefox</a></li></ul></li></ul></nav></div></div><div class=post-content><p><img src=https://blog-cloudflare-com-assets.storage.googleapis.com/2019/10/DoT-DoH@2x.png alt=05_01.png></p><h2 id=what-is-doh>What is DoH</h2><p>DoH <a href=https://tools.ietf.org/html/rfc8484>IETF RFC8484</a> allows browser to send DNS requests as normal-looking HTTPS traffic to special DoH-compatible DNS servers (called DoH resolvers). Basically, it hides DNS requests inside the normal deluge of HTTPS data. DoH doesn&rsquo;t encrypt DNS requests. That&rsquo;s a different protocol, namely DNS-over-TLS, aka <a href=https://gamedun.github.io/-----https://en.wikipedia.org/wiki/DNS_over_TLS>DoT</a>.</p><p>By moving DNS server settings from the OS to the browser level, and by encrypting the DNS traffic, DoH effectively hides DNS traffic from internet service providers (ISPs), local parental control software, antivirus software, enterprise firewalls and traffic filters, and about any other third-party that tries to intercept and sniff a user&rsquo;s traffic.</p><p>Mozilla has already rolled out support for the DoH protocol a few years back. Currently, enabling DoH support in Firefox is as easy as pushing a few buttons.</p><p>On the other hand, enabling DoH in Chrome isn&rsquo;t as easy, as Google is currently a little bit behind with supporting the protocol. DoH works just fine in Chrome, but there&rsquo;s no user interface for enabling or configuring it.</p><h2 id=enabling-and-disabling-dns-over-https-in-chrome>Enabling and disabling DNS-over-HTTPS in Chrome</h2><p>To enable DoH support in Chrome, users would have to use a so-called command-line argument (or command-line flag), which is a set of additional instructions that are passed to the Chrome executable at start-up, to enable in-dev features.Chrome 78 enables opportunistic DoH if the system resolver address matches one of the hard-coded DoH providers (source code change). This experiment is enabled for all platforms except Linux and iOS, and excludes enterprise deployments by default.</p><ol><li><p>Find your Chrome shortcut. This may be on your taskbar, desktop, start menu, or somewhere else on your file system.</p></li><li><p>Right-click on the Chrome shortcut and select the Properties option.
<img src=https://zdnet4.cbsistatic.com/hub/i/2019/09/08/2c48eb93-84cf-4408-8796-5aa6484d9329/1f90fe0340491c4d0a7b1c84e3c5de13/chrome-doh-rc.png alt=chrome-doh-rc.png></p></li><li><p>In the Target field, add the following text at the end of the shortcut path and hit Save.<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=799753#c8">Source</a></p></li></ol><blockquote><p><em>&ndash;enable-features=&ldquo;dns-over-https&lt;DoHTrial&rdquo; &ndash;force-fieldtrials=&ldquo;DoHTrial/Group1&rdquo; &ndash;force-fieldtrial-params=&ldquo;DoHTrial.Group1:server/https%3A%2F%2F1.1.1.1%2Fdns-query/method/POST</em></p></blockquote><p>The above text will configure Chrome to use the Cloudflare DoH server. Users can select any other DoH server from this list.</p><p><img src=https://zdnet2.cbsistatic.com/hub/i/r/2019/09/08/a0f7384e-b8ed-44fb-a896-caf2a82ca818/resize/370xauto/85d6a9a189d6cc9efbd5abe961752d09/chrome-doh-target.png alt=chrome-doh-target.png></p><ol><li><p>If Chrome is already running, restart it. Otherwise, start Chrome.</p></li><li><p>To test if DoH support is working in Chrome, access <a href=https://1.1.1.1/help>https://1.1.1.1/help</a>. On the right of &ldquo;Using DNS over HTTPS (DoH)&rdquo; the site should return &ldquo;Yes.&rdquo;</p></li></ol><p><img src=https://zdnet2.cbsistatic.com/hub/i/2019/09/08/644950c8-50ec-44b6-8905-a4924c0d5a8a/ac21bfbdb1a0c2b446465191548bd5a5/chrome-doh-ok.png alt=chrome-doh-ok.png></p><blockquote><p>Note:Chrome 78 enables opportunistic DoH if the system resolver address matches one of the hard-coded <a href=https://www.chromium.org/developers/dns-over-https>DoH providers</a> (<a href=https://chromium.googlesource.com/chromium/src.git/+/f93a48e3720931c25a3abc7848b08afed43e3be2%5E%21/>source code change</a>). This experiment is enabled for all platforms except Linux and iOS, and excludes enterprise deployments by default.</p></blockquote><h2 id=enabling-and-disabling-dns-over-https-in-firefox>Enabling and disabling DNS-over-HTTPS in Firefox</h2><ol><li><p>Click the menu button <img src=https://user-media-prod-cdn.itsre-sumo.mozilla.net/uploads/gallery/images/2017-10-22-15-37-15-18c775.png alt=Fx57>Menu and choose Options.</p></li><li><p>In the General panel, scroll down to Network Settings and click the Settingsâ€¦ button.</p></li><li><p>In the dialog box that opens, scroll down to Enable DNS over HTTPS.</p><ul><li><p><strong>On</strong>: Select the Enable DNS over HTTPS checkbox. Select a provider or set up a custom provider.</p></li><li><p><strong>Off</strong>: Deselect the Enable DNS over HTTPS checkbox.</p></li></ul></li></ol><p><img src=https://user-media-prod-cdn.itsre-sumo.mozilla.net/uploads/gallery/images/2019-07-17-12-46-00-b3bf60.png alt=image></p><ol><li>Click OK to save your changes and close the window.</li></ol><p><strong><em>Reference:</em></strong></p><ol><li><p><em><a href=https://tools.ietf.org/html/rfc8484>https://tools.ietf.org/html/rfc8484</a></em></p></li><li><p><em><a href=https://www.zdnet.com/article/how-to-enable-dns-over-https-doh-in-google-chrome/>https://www.zdnet.com/article/how-to-enable-dns-over-https-doh-in-google-chrome/</a></em></p></li><li><p><em><a href=https://support.mozilla.org/en-US/kb/firefox-dns-over-https>https://support.mozilla.org/en-US/kb/firefox-dns-over-https</a></em></p></li><li><p><em><a href=https://blog.cloudflare.com/dns-encryption-explained/>https://blog.cloudflare.com/dns-encryption-explained/</a></em></p></li></ol></div><div class=post-copyright><p class=copyright-item><span class=item-title>Author</span>
<span class=item-content>Canary</span></p><p class=copyright-item><span class=item-title>LastMod</span>
<span class=item-content>December 17, 2019</span></p></div><footer class=post-footer><div class=post-tags><a href=/tags/chrome/>Chrome</a>
<a href=/tags/firefox/>FireFox</a>
<a href=/tags/doh/>DoH</a></div><nav class=post-nav><a class=prev href=/post/never_binge_again/><i class="iconfont icon-left"></i><span class="prev-text nav-default">Never Binge Again, by Glenn Livingston</span>
<span class="prev-text nav-mobile">Prev</span></a>
<a class=next href=/post/math_for_cs_ml/><span class="next-text nav-default">Math for Computer Science and Machine Learning</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div></div></main><footer id=footer class=footer><div class=social-links><a href=https://gsearch.azurewebsites.net/ class="iconfont icon-google" title=google></a><a href=https://github.com class="iconfont icon-github" title=github></a><a href=https://fromxt.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span><div class=busuanzi-footer><span id=busuanzi_container_site_pv>site pv: <span id=busuanzi_value_site_pv><img src=/img/spinner.svg alt=spinner.svg></span></span>
<span class=division>|</span>
<span id=busuanzi_container_site_uv>site uv: <span id=busuanzi_value_site_uv><img src=/img/spinner.svg alt=spinner.svg></span></span></div><span class=copyright-year>&copy;
2018 -
2019
<span class=heart><i class="iconfont icon-heart"></i></span><span class=author>Canary</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script><script type=text/javascript src=/dist/even.26188efa.min.js></script></body></html>